阶段 A：KIOSK UI & 基础流程（不接硬件）

- [x] A1. 项目骨架：Compose + Navigation + MVVM（单 Activity）

- [x] A2. 多语言：德语/英语（默认德语），字符串资源结构

 - [x] A3. 页面1：首页选择程序

快速/标准/高级卡片：显示名称/时长/价格（先用本地假数据）

每个程序下展示"增值服务名称列表"（只显示文字）

- [x] A4. 页面2：选择支付方式

卡支付入口、现金入口

复选框：I confirm that I am familiar with the rules of use

未勾选：按钮禁用/提示 


- [x] A5. 页面3：洗车进行中（静态文案 + 状态占位）


- [x] A6. 基础 UI 规范：大按钮/大字号/明确提示（KIOSK）

阶段 B：配置与数据模型（仍不接硬件）

- [x] B1. 洗车程序配置模型（价格/时长可被后台修改 -> 先做本地配置存储）

- [x] B2. "洗车机状态"模型与状态机（空闲/占用/进行中/故障）

- [x] B3. 支付流程状态机（未开始→选择方式→支付中→成功/失败→启动洗车/等待）

阶段 C：交易记录（本地）

- [x] C1. Room：交易记录表（时间、程序、支付方式、金额、结果）

- [x] C2. 交易列表查看页（可选做一个隐藏入口或管理员入口）

- [x] C3. 导出 CSV

- [x] C4. 导出 Excel（.xlsx）

阶段 D：现金设备（ITL，真硬件）

- [x] D1. 现金设备通讯层（Retrofit/SDK 包装）

- [x] D2. 纸币器 SSP=0：连接/启用/收款/余额

- [x] D3. 硬币器 SSP=16：连接/启用/收款/余额

- [x] TEST_D. 现金设备连通性测试（测试 Gate）

测试范围：
- 纸币器 SSP=0
- 硬币器 SSP=16

测试目标（全部达成）：
1) 设备可被识别并连接 ✓
2) Enable / Disable 可控 ✓
3) 投币 / 投钞事件可被实时捕获 ✓
4) 无崩溃、无卡死 ✓

实现内容：
- 新增 Device Test Screen（设备测试界面）
- 实现设备连接/断开功能
- 实现 Enable/Disable 控制
- 实现状态轮询机制（500ms 间隔）捕获设备状态变化
- 增强日志输出（关键操作均有详细日志）
- 添加测试入口：首页长按 Logo 打开设备测试页面

测试步骤：
1. 启动应用，在首页长按 Logo 进入设备测试页面
2. 点击"连接"按钮连接纸币器（SSP=0）
3. 点击"连接"按钮连接硬币器（SSP=16）
4. 验证设备状态显示为"已连接"，并显示 DeviceID
5. 点击"启用"按钮，验证状态变为"已启用"
6. 点击"禁用"按钮，验证状态变为"未启用"
7. 在设备启用状态下，投入纸币/硬币，观察日志区域是否捕获到状态变化事件
8. 验证事件计数增加，最后事件显示状态变化信息
9. 点击"断开"按钮，验证设备断开连接
10. 验证应用无崩溃、无卡死

关键日志点：
- CashDeviceRepository: 认证、连接、启动、启用/禁用、状态查询、断开
- CashDeviceTestViewModel: 设备状态变化、事件捕获、测试日志
- 所有关键操作均有时间戳和详细日志输出

 D4. 混合收款：累加投入金额

 D5. 混合找零算法（根据库存最优找零）

 D6. 找零失败策略（库存不足提示/退款流程占位）

阶段 E：POS 支付（真硬件/SDK）

 E1. POS 支付抽象接口（为不同厂商适配）

 E2. 卡支付流程：发起→等待→成功/失败回调

 E3. 与"确认框"联动：未确认不可发起支付

阶段 F：洗车机通信与闸门控制

 F1. 洗车机通信层（开关量/RS-485 协议抽象）

 F2. 支付成功后：先读状态，空闲才启动，否则提示等待 

 F3. 启动洗车：发送启动指令

 F4. 闸门控制：自动开闸/手动开闸接口

 F5. 实时状态上报到支付系统（如有服务端）

阶段 G：后台/远程/报表（最后做）

 G1. 后台管理（Web 或 App）：价格配置、设备状态、营收

 G2. 报表：日/月收入、洗车次数；可筛选并打印 

 G3. 远程控制闸门（权限与审计）
